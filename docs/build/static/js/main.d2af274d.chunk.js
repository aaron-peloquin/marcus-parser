(this["webpackJsonpmarcus-parser"]=this["webpackJsonpmarcus-parser"]||[]).push([[0],{12:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),o=a.n(l),c=(a(12),a(2)),i="undefined"!==typeof window,u=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;try{var n=JSON.stringify(t);localStorage.setItem("mark-".concat(e),n)}catch(r){a&&console.warn("[localStorageSave] not accessible to save")}},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a={};try{var n=localStorage.getItem("mark-"+e);if(n){var r=JSON.parse(n);r&&(a=r)}}catch(l){t&&console.warn("[localStorageLoad] not accessible to load")}return a},m=function(e){var t=e.rowData||{},a=t.currentStartDate,l=t.reservationUrl,o=t.distanceDrove,i=t.id,m=Object(n.useContext)(w).triggerNewRender,d=Object(n.useState)(s(i)||0),v=Object(c.a)(d,2),g=v[0],E=v[1],h=Object(n.useCallback)((function(e){var t=(e||{}).target.value,a=void 0===t?0:t;u(i,a,!1),E(a),m()}),[i,E,m]);return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,r.a.createElement("a",{href:l},l)),r.a.createElement("td",null,o),r.a.createElement("td",null,r.a.createElement("input",{value:g,type:"number",onChange:h})))},d=function(e){var t=e.label,a=void 0===t?"":t,n=e.tabularData,l=void 0===n?[]:n;return l?l.length?r.a.createElement("table",{border:"1",style:{width:"100%"}},r.a.createElement("caption",null,r.a.createElement("h2",null,a," Data Summary")),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{role:"img","aria-label":"Date"},"\ud83d\udcc5")),r.a.createElement("th",null,r.a.createElement("span",{role:"img","aria-label":"Reservation link"},"\ud83d\udd17")),r.a.createElement("th",null,r.a.createElement("span",{role:"img","aria-label":"Distance"},"\ud83d\udee3\ufe0f")),r.a.createElement("th",null,r.a.createElement("span",{role:"img","aria-label":"Revenue"},"\ud83d\udcb0")))),r.a.createElement("tbody",null,l.map((function(e){var t=e.id;return r.a.createElement(m,{key:t,rowData:e})})))):r.a.createElement(r.a.Fragment,null):r.a.createElement("h2",null,"Please upload your reservations json file")},v=function(e){var t=e.data,a=Object(n.useState)(s("full rows checkbox state")||!1),l=Object(c.a)(a,2),o=l[0],i=l[1],m=Object(n.useContext)(w).numForcedRender,d=Object(n.useCallback)((function(){var e=!o;u("full rows checkbox state",e,!1),i(e)}),[o,i]),v=Object(n.useCallback)((function(e){return parseInt(s(e))||-1}),[]),g=Object(n.useMemo)((function(){var e={countedRecords:0,averageMileage:-1,averageRevenue:-1},a={distance:0,revenue:0},n={distance:0,revenue:0,tempData:a};return t.forEach((function(t){var r=t.distanceDrove,l=t.id,c=v(l);o?r>0&&c>0&&(e.countedRecords++,n.distance++,a.distance+=r,n.revenue++,a.revenue+=c):(r>0||c>0)&&(e.countedRecords++,r&&(n.distance++,a.distance+=r),c&&(n.revenue++,a.revenue+=c))})),e.averageMileage=+(a.distance/n.distance).toFixed(2),e.averageRevenue=+(a.revenue/n.revenue).toFixed(2),e}),[t,o,v,m]);return console.log({data:t,parsedData:g}),0===g.countedRecords?r.a.createElement(r.a.Fragment,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{border:"4",style:{width:"100%"}},r.a.createElement("caption",null,r.a.createElement("h1",null,"Analytitiks"),r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:o,onChange:d}),r.a.createElement("span",null,"Only calculate when ",r.a.createElement("span",{role:"img","aria-label":"Mileage"},"\ud83d\udee3\ufe0f")," ",r.a.createElement("strong",null,"and")," ",r.a.createElement("span",{role:"img","aria-label":"Revenue"},"\ud83d\udcb0")," have values. Otherwise, calculate when either is present."))),r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,r.a.createElement("span",{role:"img","aria-label":"Mileage"},"\ud83d\udee3\ufe0f")),r.a.createElement("th",null,r.a.createElement("span",{role:"img","aria-label":"Revenue"},"\ud83d\udcb0")))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,g.countedRecords),r.a.createElement("td",null,g.averageMileage),r.a.createElement("td",null,g.averageRevenue)))))},g=a(6),E={border:"dashed 4px orange",margin:"0 4px 44px 4px",padding:"0 44px",textAlign:"center",cursor:"pointer"},h=function(e){var t=e.setFileData,a=Object(n.useCallback)((function(e){var a=e[0],n=new FileReader;"reservations.json"===a.name?(n.onload=function(e){try{var a=JSON.parse(e.target.result);t(a)}catch(n){alert("Error trying to parse JSON. Maybe download it from remote again?")}},n.readAsText(a)):alert('wrong file, bro, I want "reservations.json"')}),[t]);return r.a.createElement(g.a,{onDrop:a},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("section",{style:E},r.a.createElement("div",t(),r.a.createElement("input",a()),r.a.createElement("p",null,"You may drag and or maybe drop some filez right over 'ere. You can also ",r.a.createElement("strong",null,"click")," to select files with your native web browsers file picker functionality that is baked into the browser okay")))}))},p=function(e){return+e.replace(/[^\d.-]/g,"")},b=function(e){for(var t=0,a=0;t<e.length;t++)a=Math.imul(31,a)+e.charCodeAt(t)|0;return a},f=function(){var e=Object(n.useState)({}),t=Object(c.a)(e,2),a=t[0],l=t[1],o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.map((function(e){t||(e=e.current);var a=e||{},n=a.reservation_check_in,r=a.protection_level,l=void 0===r?"Not Found":r,o=a.reservation_state,c=void 0===o?{}:o,i=a.invoices,u=(i=void 0===i?{}:i).current,s=void 0===u?[]:u,m=a.reservation_url,d=new Date(c.trip_start),v={currentStartDate:d.toLocaleString(),bigMoney:s,distanceDrove:-1,driverUrl:e[t?"guest_url":"host_url"],id:b(m),protection_level:l,reservationUrl:m,sketchyData:!0,timestamp:d.valueOf()},g=p(n.owner_check_in_odometer_reading),E=p(n.owner_check_out_odometer_reading);return g&&E&&(g<E&&(v.sketchyData=!1),v.distanceDrove=E-g),v}))}(a.as_host);return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{setFileData:l}),r.a.createElement(v,{data:o}),r.a.createElement(d,{label:"Host",tabularData:o}))},w=r.a.createContext((function(){})),y=function(){var e=Object(n.useState)(0),t=Object(c.a)(e,2),a=t[0],l=t[1];return r.a.createElement(w.Provider,{value:{numForcedRender:a,triggerNewRender:function(){var e=a+1;console.log({newNumberOfRenders:e}),l(e)}}},r.a.createElement(f,null))},k={color:"magenta",textAlign:"center",transform:"rotate(-10deg)",textDecoration:"overline underline"},O={textDecoration:"line-through",color:"purple"},D=function(){return r.a.createElement("span",{className:"fancyPantsSpin","data-nessesary":"yes",style:O},"!")};var x=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",{style:k,"data-aesthetics":"lovely"},r.a.createElement(D,null),"Oh hi Mark",r.a.createElement(D,null)),r.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},7:function(e,t,a){e.exports=a(15)}},[[7,1,2]]]);
//# sourceMappingURL=main.d2af274d.chunk.js.map